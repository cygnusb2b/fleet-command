{% extends '@AppBundle/Resources/views/base.html.twig' %}
{% block title %}Home{% endblock %}

{% block body %}

    <div class="jumbotron">
        <div class="container">
            <img src="https://s3.amazonaws.com/cygnusimages/fleet-commander/logo.png" class="pull-left">
            <h1>Greetings, Commander!</h1>

            {% if username is not null %}
                <p>Your account has been provisioned!</p>
                <p>Your username is <pre>{{ username }}</pre></p>
                <p>Visit <a href="http://{{username}}.test-sandbox.baseplatform.io" target="_blank">your instance <i class="fa fa-external-link"></i></a></p>

            {% else %}
                <form style="width: 400px; float: right;" method="post" action="{{ path('app_default_fork') }}">
                    <div class="well">
                        <div class="form-group">
                            <label for="username">Username:</label>
                            <input type="text" id="username" name="username" class="form-control" placeholder="Github.com Username" autofocus />
                        </div>
                        <div class="form-group">
                            <label for="email">Email:</label>
                            <input type="email" id="email" name="email" class="form-control" placeholder="Email address (for git)" />
                        </div>
                        <div class="form-group">
                            <label for="name">Name:</label>
                            <input type="text" id="name" name="name" class="form-control" placeholder="Name (for git)" />
                        </div>
                        <p class="text-warning text-center">All fields are required.</p>
                    </div>
                    <button type="submit" class="btn btn-block btn-success">Sign In</button>
                </form>
            {% endif %}

            <p><br />Visit the <a href="https://github.com/cygnusb2b/fleet-command" target="_blank">project <i class="fa fa-external-link"></i></a> or <a href="https://github.com/cygnusb2b/fleet-command/wiki" target="_blank">wiki <i class="fa fa-external-link"></i></a> for more information.</p>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
<script type="text/javascript">
$(document).ready(function(){
    $('form').on('submit', function() {
        $('button[type="submit"]').attr('disabled','disabled');
        $('p.text-warning', $(this)).html('Your account is being provisioned. This may take up to 5 minutes.');
    })
})
</script>
{% endblock %}
